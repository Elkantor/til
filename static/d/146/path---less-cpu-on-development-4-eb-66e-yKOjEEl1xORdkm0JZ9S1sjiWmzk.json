{"data":{"site":{"siteMetadata":{"title":"TIL"}},"markdownRemark":{"id":"27b535eb-7b02-5805-8634-6dba40cfd284","excerpt":"Is Rails eating your CPU in development? Try lowering its priority using  renice(1) , a standard BSD utility that should be available in OSâ€¦","htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Is Rails eating your CPU in development? Try lowering its priority using "},{"type":"element","tagName":"a","properties":{"href":"http://manpages.ubuntu.com/manpages/zesty/en/man1/renice.1.html"},"children":[{"type":"text","value":"renice(1)"}]},{"type":"text","value":", a standard BSD utility that should be available in OS X and most Linux distributions. Here's a shell script that will automatically reset the priority to "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"+15"}]},{"type":"text","value":" to common development processes:"}]},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sh"]},"children":[{"type":"text","value":"#!/usr/bin/env sh\nsudo renice +15 -p $(ps ax | grep -E 'ruby|node|watchman|postgres' | grep -v grep | awk '{print $1}' | tr '\\n' ' ')\n"}]}]},{"type":"comment","value":" {.-wide} "},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Save this as "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"renice-dev"}]},{"type":"text","value":" into one of your "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"bin"}]},{"type":"text","value":" paths, and give it a "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"chmod +x renice-dev"}]},{"type":"text","value":". You can type "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"renice-dev"}]},{"type":"text","value":" after you start your development processes to \"renice\" them."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The lowest priority is "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"+19"}]},{"type":"text","value":" (only run when nothing else is running), the default is "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"0"}]},{"type":"text","value":", and the highest is "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"-20"}]},{"type":"text","value":" (makes things go very fast)."}]},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"References"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://tinyapps.org/blog/mac/201107230700_throttle_process_os_x.html"},"children":[{"type":"text","value":"Throttling processes in OS X"}]},{"type":"text","value":" "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"(tinyapps.org)"}]}]},{"type":"text","value":"\n"}]}]},"fields":{"slug":"/less-cpu-on-development/"},"frontmatter":{"title":"Use less CPU for Rails","date":"July 12, 2017","description":"Is Rails eating your CPU in development? Try this nifty trick.","attachments":null}}},"pageContext":{"node_id":"27b535eb-7b02-5805-8634-6dba40cfd284","nodeType":"post","title":"Use less CPU for Rails","slug":"/less-cpu-on-development/","previous":{"id":"a2c35318-677e-5a19-9e90-d6bbe267bb4c","fields":{"slug":"/a-better-hello-world/"},"frontmatter":{"title":"A Better Hello World Program"}},"next":{"id":"c200b7e1-be30-508c-b928-29098f297bdf","fields":{"slug":"/rails-mailer-race-conditions/"},"frontmatter":{"title":"Rails mailer conventions are silly"}}}}