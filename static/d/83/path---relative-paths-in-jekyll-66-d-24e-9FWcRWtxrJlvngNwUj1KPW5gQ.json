{"data":{"site":{"siteMetadata":{"title":"TIL"}},"markdownRemark":{"id":"dd181913-d0ae-5d22-a8e1-d02f29a788df","excerpt":"Jekyll  is a great static site tool. If you're using  GitHub Pages , it comes with it for free, making it a very useful tool for any public…","htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://jekyllrb.com/"},"children":[{"type":"text","value":"Jekyll"}]},{"type":"text","value":" is a great static site tool. If you're using "},{"type":"element","tagName":"a","properties":{"href":"http://pages.github.com/"},"children":[{"type":"text","value":"GitHub Pages"}]},{"type":"text","value":", it comes with it for free, making it a very useful tool for any public blog or website. It comes, though, with one common problem that I've yet to come across a good solution for: relative paths."}]},{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"next-block","properties":{"title":"Why are relative paths a problem?"},"children":[]}]},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"The problem"}]},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"The mess of relative paths"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's say you have an innocent URL in your layout like the one below. This is a relative path, not an absolute one that begins with "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/"}]},{"type":"text","value":". It resolves based on wherever it's included from."}]},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-html"]},"children":[{"type":"text","value":"<!-- _layouts/default.html -->\n<link href=\"assets/style.css\" rel=\"stylesheet\" />\n"}]}]},{"type":"comment","value":" {.-wide} "},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This works well in pages of your site placed in the root directory. Once you path one level deep though, you'll encounter problems."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"From this page..."}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Base"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Final URL"}]},{"type":"element","tagName":"th","properties":{"align":"right"},"children":[{"type":"text","value":"Result"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/index.html"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/assets/style.css"}]}]},{"type":"element","tagName":"td","properties":{"align":"right"},"children":[{"type":"text","value":"Good ✓"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/me.html"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/assets/style.css"}]}]},{"type":"element","tagName":"td","properties":{"align":"right"},"children":[{"type":"text","value":"Good ✓"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/about/profile.html"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/about"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/about/assets/style.css"}]}]},{"type":"element","tagName":"td","properties":{"align":"right"},"children":[{"type":"text","value":"Wrong ✗"}]}]}]}]},{"type":"comment","value":" {.-wide} "},{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"next-block","properties":{"title":"How do we usually work around them?"},"children":[]}]},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"A naive workaround"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"One workaround is to use absolute paths by adding a "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/"}]},{"type":"text","value":" in the beginning."}]},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-html"]},"children":[{"type":"text","value":"<link href=\"/assets/style.css\" rel=\"stylesheet\" /> ^\n"}]}]},{"type":"comment","value":" {.-wide} "},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Why absolute URLs suck"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This works great for sites that live on its own domain. When your site will be hosted in a sub-directory (such as the case with "},{"type":"element","tagName":"a","properties":{"href":"http://pages.github.com/"},"children":[{"type":"text","value":"GitHub Project Pages"}]},{"type":"text","value":"), this absolute path will not resolve to "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/project/assets/style.css"}]},{"type":"text","value":" as you probably would have intended."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"If your site is in..."}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"It resolves to..."}]},{"type":"element","tagName":"th","properties":{"align":"right"},"children":[]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"user.github.io/"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/assets/style.css"}]}]},{"type":"element","tagName":"td","properties":{"align":"right"},"children":[{"type":"text","value":"Good ✓"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"user.github.io/project/"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/assets/style.css"}]}]},{"type":"element","tagName":"td","properties":{"align":"right"},"children":[{"type":"text","value":"Wrong ✗"}]}]}]}]},{"type":"comment","value":" {.-wide} "},{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"next-block","properties":{"title":"Let's look at a better workaround."},"children":[]}]},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"A better workaround"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This snippet below automatically determines the relative base and stores it in the variable "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"base"}]},{"type":"text","value":". Place it in your partials path, and include the partial in your layouts."}]},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-html"]},"children":[{"type":"text","value":"<!-- _includes/base.html -->\n{% assign base = '' %} {% assign depth = page.url | split: '/' | size | minus: 1\n%} {% if depth <= 1 %}{% assign base = '.' %} {% elsif depth == 2 %}{% assign\nbase = '..' %} {% elsif depth == 3 %}{% assign base = '../..' %} {% elsif depth\n== 4 %}{% assign base = '../../..' %}{% endif %}\n"}]}]},{"type":"comment","value":" {.-wide} "},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Use it as a prefix"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can then use it as a prefix to URLs, like the examples below. You don't need to "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" it all the time—just include it once in your layouts and it will be available everywhere."}]},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-html"]},"children":[{"type":"text","value":"{% include base.html %}\n<link href=\"{{base}}/assets/style.css\" rel=\"stylesheet\" />\n"}]}]},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-html"]},"children":[{"type":"text","value":"<a href=\"{{ base }}\">Back to home</a>\n"}]}]},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-html"]},"children":[{"type":"text","value":"<a href=\"{{ base }}/about.html\">About me</a>\n"}]}]},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-html"]},"children":[{"type":"text","value":"<a href=\"{{ base }}{{ post.url }}\">Read \"{{ post.title }}\"</a>\n"}]}]}]},"fields":{"slug":"/relative-paths-in-jekyll/"},"frontmatter":{"title":"Relative paths in Jekyll","date":"March 13, 2015","description":"Fix the problem with GitHub Pages's relative URLs with this snippet."}}},"pageContext":{"node_id":"dd181913-d0ae-5d22-a8e1-d02f29a788df","nodeType":"post","title":"Relative paths in Jekyll","slug":"/relative-paths-in-jekyll/","previous":{"id":"5a4c4de2-23e0-5d57-8767-daf65213df4c","fields":{"slug":"/use-macvim-with-lua/"},"frontmatter":{"title":"Speed up MacVim with Lua"}},"next":{"id":"0fd19654-1f3a-52b9-8164-cb25c633fb48","fields":{"slug":"/mocha-clean/"},"frontmatter":{"title":"Cleaner Mocha stack traces"}}}}