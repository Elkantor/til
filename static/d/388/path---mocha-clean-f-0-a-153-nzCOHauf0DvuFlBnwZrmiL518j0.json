{"data":{"site":{"siteMetadata":{"title":"TIL"}},"markdownRemark":{"id":"8b13224a-c795-51d9-b8c7-688e212ac8cb","excerpt":"Mocha  is a great way to test JavaScript, but its stack traces are riddled\nwith useless frames from Mocha internals and 3rd-party modulesâ€¦","htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://visionmedia.github.io/mocha"},"children":[{"type":"text","value":"Mocha"}]},{"type":"text","value":" is a great way to test JavaScript, but its stack traces are riddled\nwith useless frames from Mocha internals and 3rd-party modules. Let's try and\nclean it up."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/69a382b6d99d1e1b6f1c174378d7a313/3b462/comparison.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 970px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 45.25773195876289%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVQoz2VRi27DIAzs/3/jtG7LuoZgiHkFCNDsQh+LtJOFcOy72Mep1hpTyv+wbduyLNa50OG9d8/7PY0xntDnmUsp6wEppdYayCHE10d0HnsgsZMtUe7drdU9akUNSU6x5JhLqY8CKg+guv8Zgn7WJaV6QOmEiOloNMxrXqFXcz7QK+Y6YdyReJA8kEF8khHsYzcB2kYbJaS3LiCM9QmTlz8ykmm2gp3op3aLXXYDdyNj1KTEdcIJPmu2synel+BrdwTkVU2kpJ7Z2rBAemsN9mEr2MaS9CiY1DxJB2sgWnY8xy7loux54rM07xN/keWwD3dffZz921V/K4uNtAttu73Qn2pdpWaheKT5HpNi5zze2Vo7/Iwfl3G4CgQukkh1EBGe/RebSgUx0uOqOAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;","alt":"Comparison screenshot","title":"","src":"/static/69a382b6d99d1e1b6f1c174378d7a313/3b462/comparison.png","srcSet":["/static/69a382b6d99d1e1b6f1c174378d7a313/87a8a/comparison.png 350w","/static/69a382b6d99d1e1b6f1c174378d7a313/faac4/comparison.png 700w","/static/69a382b6d99d1e1b6f1c174378d7a313/3b462/comparison.png 970w"],"sizes":["(max-width:","970px)","100vw,","970px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"comment","value":" {.-wider} "},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Introducing mocha-clean"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"mocha-clean"}]},{"type":"text","value":" is a plugin for Mocha. It strips away mocha internals,\nnode_modules, absolute paths (based on cwd), and other unneccessary cruft\nfrom stack traces."}]},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Usage"}]},{"type":"comment","value":" {.-literate-style} "},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Simply invoke Mocha with "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"-r mocha-clean"}]},{"type":"text","value":". The easiest way to do this is to add it to your "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"test/mocha.opts"}]},{"type":"text","value":" file."}]},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"--require mocha-clean\n"}]}]},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Installation"}]},{"type":"comment","value":" {.-literate-style} "},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It's available via npm, and works with Mocha 1.x in Node.js and in the browser. The source is available in GitHub: "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/rstacruz/mocha-clean"},"children":[{"type":"text","value":"rstacruz/mocha-clean"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"npm install --save-dev mocha-clean\n"}]}]},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Merging into Mocha?"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A pull request is currently open in Mocha to integrate this functionality into Mocha itself. Check out "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/mochajs/mocha/pull/1564"},"children":[{"type":"text","value":"#1564"}]},{"type":"text","value":" and offer your support and comments."}]}]},"fields":{"slug":"/mocha-clean/"},"frontmatter":{"title":"Cleaner Mocha stack traces","date":"March 06, 2015","description":"Suppress stack trace frames from 3rd-party modules in Mocha.js.","attachments":null}}},"pageContext":{"node_id":"8b13224a-c795-51d9-b8c7-688e212ac8cb","nodeType":"post","title":"Cleaner Mocha stack traces","slug":"/mocha-clean/","previous":{"id":"893ab7b8-7346-57ca-bd25-61875212c0f8","fields":{"slug":"/relative-paths-in-jekyll/"},"frontmatter":{"title":"Relative paths in Jekyll"}},"next":{"id":"8b96741f-8ee6-546d-aa84-05f8e7fc0896","fields":{"slug":"/css-ligatures/"},"frontmatter":{"title":"Using ligatures in CSS"}}}}